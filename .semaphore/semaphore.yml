version: v1.0
name: ReCpp Semaphore CI2
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: Compile and Test ReCpp
    task:
      jobs:
      - name: ReCpp Clang
        commands:
          - checkout
          - sem-version python 3.7
          - sudo pip install mama
          - sudo apt -y install libdw-dev
          - make configure-clang6-1404
          - mama build clang
          - mama test

      - name: ReCpp GCC
        commands:
          - checkout
          - sem-version python 3.7
          - sudo pip install mama
          - sudo apt -y install libdw-dev
          - sem-version cpp 8
          - g++ --version
          - mama build gcc
          - mama test

